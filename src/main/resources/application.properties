# ===================================================================
# Application Configuration
# ===================================================================
quarkus.application.name=orme-quality-monitor
quarkus.http.port=8080

# ===================================================================
# Database Configuration
# ===================================================================
# Development - H2 in-memory database
%dev.quarkus.datasource.db-kind=h2
%dev.quarkus.datasource.jdbc.url=jdbc:h2:file:./orme_monitor_dev;DB_CLOSE_DELAY=-1
%dev.quarkus.datasource.username=sa
%dev.quarkus.datasource.password=
%dev.quarkus.hibernate-orm.database.generation=update
%dev.quarkus.hibernate-orm.sql-load-script=no-file

# Test - H2 in-memory database
%test.quarkus.datasource.db-kind=h2
%test.quarkus.datasource.jdbc.url=jdbc:h2:mem:test;DB_CLOSE_DELAY=-1
%test.quarkus.datasource.username=sa
%test.quarkus.datasource.password=
%test.quarkus.hibernate-orm.database.generation=drop-and-create
%test.quarkus.hibernate-orm.sql-load-script=no-file

# Production - PostgreSQL database
%prod.quarkus.datasource.db-kind=postgresql
%prod.quarkus.datasource.jdbc.url=${JDBC_DATABASE_URL:jdbc:postgresql://localhost:5432/orme_monitor}
%prod.quarkus.datasource.username=${JDBC_DATABASE_USERNAME:postgres}
%prod.quarkus.datasource.password=${JDBC_DATABASE_PASSWORD:postgres}
%prod.quarkus.datasource.jdbc.max-size=8
%prod.quarkus.datasource.jdbc.min-size=2
%prod.quarkus.hibernate-orm.sql-load-script=no-file

# ===================================================================
# Flyway Migration Configuration
# ===================================================================
%prod.quarkus.flyway.migrate-at-start=true
%prod.quarkus.flyway.baseline-on-migrate=true
%prod.quarkus.hibernate-orm.database.generation=validate

# ===================================================================
# Security Configuration
# ===================================================================
quarkus.http.auth.basic=true
quarkus.security.users.file.enabled=true
quarkus.security.users.file.plain-text=true
quarkus.security.users.file.users=users.properties
quarkus.security.users.file.roles=roles.properties
quarkus.security.users.embedded.enabled=false

# Production security overrides
%prod.quarkus.security.users.file.users=${USERS_FILE:users.properties}
%prod.quarkus.security.users.file.roles=${ROLES_FILE:roles.properties}

# ===================================================================
# Monitor Configuration
# ===================================================================
orme.monitor.enable-data-initialization=true
orme.monitor.environment=Development
orme.monitor.jenkins.base-url=https://ci-jenkins.orbis.dedalus.com
orme.monitor.jenkins.cache-timeout-minutes=60

# Production-specific monitor settings
%prod.orme.monitor.enable-data-initialization=false

# ===================================================================
# Logging Configuration
# ===================================================================
# Logging configuration
quarkus.log.console.enable=true
quarkus.log.console.format=%d{yyyy-MM-dd HH:mm:ss,SSS} %-5p [%c{2.}] (%t) %s%e%n
quarkus.log.level=INFO
quarkus.log.category."com.dedalus".level=DEBUG

# Production-specific logging
%prod.quarkus.log.level=INFO

# ===================================================================
# OpenAPI and Swagger UI Configuration
# ===================================================================
quarkus.swagger-ui.always-include=true
quarkus.smallrye-openapi.path=/openapi
quarkus.swagger-ui.path=/swagger-ui
quarkus.sw.swagger-ui.theme=original

# API information
mp.openapi.scan.disable=false
mp.openapi.extensions.smallrye.info.title=ORME Quality Monitor API
mp.openapi.extensions.smallrye.info.version=1.0.0
mp.openapi.extensions.smallrye.info.description=API for monitoring ORME test jobs
mp.openapi.extensions.smallrye.info.contact.name=Dedalus TVV QE team